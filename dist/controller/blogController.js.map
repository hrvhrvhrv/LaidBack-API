{"version":3,"sources":["../../src/controller/blogController.js"],"names":["config","db","api","get","req","res","Blog","find","err","blogData","status","json","error","message","success","findById","params","id","post","body","title","text","newBlog","save","put","delete","remove","_id","pupildata"],"mappings":"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","file":"blogController.js","sourcesContent":["import {Router} from 'express';\nimport Blog from '../model/Blog';\n\n// import passport from 'passport';\n// import { authenticate } from '../middleware/authMiddleware';\n\n\nexport default ({config, db}) => {\n    let api = Router();\n\n    //  read\n    // /v1/blog - Read (return all)\n    api.get('/', (req, res) => {\n        Blog.find({}, (err, blogData) => {\n            if (err) {\n                res.status(500).json({\n                    error: err,\n                    message: \"There has been an error retrieving blog posts.\",\n                    success: false\n                });\n            }\n            res.status(200).json(blogData);\n        });\n    });\n\n    // /v1/blog/:id - Read 1 (return by ID)\n    api.get('/:id', (req, res) => {\n        Blog.findById(req.params.id, (err, blogData) => {\n            if (err) {\n                res.status(500).json({\n                    error: err,\n                    message: \"There has been an error retrieving blog posts.\",\n                    success: false\n                });\n            }\n            res.status(200).json(blogData);\n        });\n    });\n\n    // /v1/blog/add - Create\n\n    api.post('/add', (req, res) => {\n        if (!req.body.title || !req.body.text) {\n            res.status(403).json({\n                success: false,\n                message: 'Please enter blog data'\n            });\n        }\n        let newBlog = new Blog();\n        newBlog.title = req.body.title;\n        newBlog.text = req.body.text;\n        newBlog.save(err => {\n            if (err) {\n                res.status(500).json({\n                    error: err,\n                    message: \"There has been an error registering pupil. Please Try again\",\n                    success: false\n                });\n            }\n            res.status(200).json({\n                message: 'New blog post successfully saved',\n                success: true\n            });\n        });\n    });\n\n    // /v1/blog/:id - Update\n\n    api.put('/:id', (req, res) => {\n        Blog.findById(req.params.id, (err, blogData) => {\n            if (err) {\n                res.status(500).json({\n                    error: err,\n                    message: \"There has been an error registering pupil. Please Try again\",\n                    success: false\n                });\n            }\n            blogData.title = req.body.title;\n            blogData.text = req.body.text;\n            blogData.save(err => {\n                if (err) {\n                    res.status(500).json({\n                        error: err,\n                        message: \"There has been an error registering pupil\",\n                        success: false\n                    });\n                }\n                res.status(200).json({\n                    message: \"Blog post successfully updated\",\n                    success: true\n                });\n            });\n        });\n    });\n\n    // /v1/blog/:id - Delete\n    api.delete('/:id', (req, res) => {\n        Blog.remove({\n            _id: req.params.id\n        }, (err, pupildata) => {\n            if (err) {\n                res.status(500).json({\n                    error: err,\n                    message: \"There has been an error registering pupil. Please Try again\",\n                    success: false\n                });\n            }\n            res.status(200).json({message: \"Blog post successfully removed\", success: true});\n\n        });\n    });\n\n    return api;\n}\n\n\n"]}